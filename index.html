<script>
	var propNum = 0;
	
	function sort(iList, propIndex, valueField) {
		
		var subProp = null;
		var prop = "property" + propIndex;
		var aList = [];

		if (propIndex < propNum -1) {
			subProp = "property" + (propIndex+1);
		}

		for (var i=0; i<iList.length; i++) {
			var key = iList[i][prop];
			if (!aList[key]) {
				aList[key] = [];				
			}
			aList[key].push(iList[i]);
		}
		
		return aList;

	}

	function main() {
		var inputField = document.getElementById("input");
		var arr = inputField.value.split("\n");
		var fields = arr[0].split("|"); // First Line contains property and values
		var iList = [];

		arr.shift(); // remove first line;
		for (var i=0; i<arr.length; i++) {
			var values = arr[i].split("|");
			var ele = {};

			for (var j=0; j<fields.length; j++) {
				ele[fields[j]] = values[j];
			}

			iList.push(ele);
		}

		console.log(iList);
		console.log(sort(iList, 0, "a"));
	}
</script>
<html>
	<body style="text-align: center;">
		<textarea id="input" style="width: 80%; height: 300px;"></textarea>
		<br/><br/>
		<input type="button" value="Output" onclick="main()">
	</body>	
</html>